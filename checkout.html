<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Checkout LAKSMIÃ‰</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: #fffaf9;
  padding: 20px;
}

.container {
  max-width: 700px;
  margin: auto;
  background: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

h2 {
  color: #f2a5b5;
  text-align: center;
}

.item {
  font-size: 14px;
  margin-bottom: 6px;
}

button {
  width: 100%;
  padding: 12px;
  background: #f2a5b5;
  color: white;
  border: none;
  border-radius: 6px;
  font-weight: bold;
}
</style>
</head>

<body>

<div class="container">
  <h2>Checkout</h2>

  <div id="checkoutList"></div>
  <p><strong id="total"></strong></p>

  <button onclick="checkout()">Kirim Pesanan</button>

  <hr>
  <h3>Riwayat Pembelian</h3>
  <div id="history"></div>
</div>

<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];
let history = JSON.parse(localStorage.getItem('history')) || [];

function renderCheckout() {
  let list = document.getElementById('checkoutList');
  let total = 0;
  list.innerHTML = '';

  cart.forEach(item => {
    list.innerHTML += `<div class="item">${item.nama} - Rp ${item.harga.toLocaleString()}</div>`;
    total += item.harga;
  });

  document.getElementById('total').innerText =
    'Total: Rp ' + total.toLocaleString();
}

function checkout() {
  if (cart.length === 0) {
    alert('Keranjang masih kosong');
    return;
  }

  history.unshift({
    tanggal: new Date().toLocaleString(),
    items: cart
  });

  localStorage.setItem('history', JSON.stringify(history));
  localStorage.removeItem('cart');

  alert('Pesanan berhasil!');
  cart = [];
  renderCheckout();
  renderHistory();
}

function renderHistory() {
  let h = document.getElementById('history');
  h.innerHTML = '';

  history.forEach(p => {
    h.innerHTML += `<p><strong>${p.tanggal}</strong></p>`;
    p.items.forEach(i => {
      h.innerHTML += `<div class="item">- ${i.nama}</div>`;
    });
    h.innerHTML += '<hr>';
  });
}

renderCheckout();
renderHistory();
</script>
  <div style="text-align:center; margin-top: 10px;">
      <a href="index.html">&larr; Kembali ke Beranda</a>
    </div>

</body>
</html>
